{
  "openapi": "3.0.0",
  "info": {
    "title": "WhatsApp Gateway Session API",
    "version": "1.0",
    "description": "Session Message APIs for Connecting to WA Gateway",
    "contact": {
      "name": "Tayana Software Solutions Private Ltd",
      "email": "support@tayana.in"
    }
  },
  "servers": [
    {
      "url": "https://localhost:443/wag/v1",
      "description": "wag"
    }
  ],
  "paths": {
    "/msgs": {
      "post": {
        "summary": "WhatsApp Session API",
        "operationId": "post-msgs",
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Authorization": {
                "schema": {
                  "type": "string"
                },
                "description": "API UserName and Password encoded in Base64 Format"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                },
                "examples": {}
              }
            }
          },
          "202": {
            "description": "Accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "204": {
            "description": "No Content",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "206": {
            "description": "Partial Content",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "405": {
            "description": "Method Not Allowed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "408": {
            "description": "Request Timeout",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          }
        },
        "description": "WhatsApp Gateway API for sending session messages",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/sessionMsg"
              },
              "examples": {}
            },
            "application/xml": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            },
            "text/html": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            },
            "text/plain": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            },
            "application/EDI-X12": {
              "schema": {
                "type": "object",
                "properties": {
                  "": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "description": "TSS WhatsApp Gateway API body for session messages "
        },
        "tags": [
          "WhatsApp"
        ]
      }
    },
    "/template": {
      "post": {
        "summary": "",
        "operationId": "post-template",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "501": {
            "description": "Not Implemented",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GenericResponse"
                }
              }
            }
          }
        },
        "description": "TSS WhatsApp GW Template Message API for sending document, audio or video",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/templateMsg"
              }
            }
          }
        },
        "tags": [
          "WhatsApp"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "sessionMsg": {
        "description": "TSS WhatsApp GW APIs to send sessions message. Messages can be sent are: text, text with preview URL, media image, media document, media audio, media video, media location",
        "type": "object",
        "x-examples": {
          "example-2": {
            "txnId": "string",
            "number": "string",
            "req_type": "image",
            "req_mode": "single",
            "file_name": "string",
            "media": {
              "msg": "string",
              "preview_url": false,
              "link": "http://example.com",
              "file": "string",
              "caption": "string",
              "longitude": "string",
              "latitude": "string",
              "name": "string",
              "address": "string"
            }
          }
        },
        "title": "",
        "properties": {
          "txnId": {
            "$ref": "#/components/schemas/txnIdTag"
          },
          "number": {
            "$ref": "#/components/schemas/numberTag"
          },
          "req_type": {
            "type": "string",
            "minLength": 1,
            "description": "Media Type to be sent. It can be text|document|audio|video|image|location",
            "enum": [
              "image",
              "document",
              "audio",
              "video",
              "location",
              "text"
            ]
          },
          "req_mode": {
            "type": "string",
            "enum": [
              "single",
              "bulk"
            ],
            "description": "Single ot Bulk"
          },
          "file_name": {
            "type": "string",
            "description": "Bulk File upload link"
          },
          "media": {
            "type": "object",
            "properties": {
              "msg": {
                "$ref": "#/components/schemas/msgTag"
              },
              "preview_url": {
                "type": "boolean",
                "default": false,
                "description": "Enable Preview URL for WhatsApp"
              },
              "link": {
                "$ref": "#/components/schemas/urlTag"
              },
              "file": {
                "type": "string",
                "minLength": 1,
                "description": "sample .pdf file name"
              },
              "caption": {
                "type": "string",
                "minLength": 1,
                "description": "sample text"
              },
              "longitude": {
                "type": "string",
                "minLength": 1,
                "description": "example: 72.838249"
              },
              "latitude": {
                "type": "string",
                "minLength": 1,
                "description": "example: 18.991341"
              },
              "name": {
                "type": "string",
                "minLength": 1,
                "description": "Location Name"
              },
              "address": {
                "type": "string",
                "minLength": 1,
                "description": "Location Address"
              }
            }
          }
        },
        "required": [
          "number",
          "req_type",
          "req_mode"
        ],
        "x-tags": [
          "WhatsApp"
        ]
      },
      "GenericResponse": {
        "title": "GenericResponse",
        "type": "object",
        "description": "Generic API Response",
        "properties": {
          "refId": {
            "type": "string",
            "description": "Internally Generated Reference Identifier"
          },
          "txnId": {
            "$ref": "#/components/schemas/txnIdTag"
          },
          "status": {
            "type": "string",
            "enum": [
              "SUCCESS",
              "FAILURE",
              "IN_PROGRESS",
              "TIMEOUT"
            ],
            "description": "Status of the Request"
          },
          "description": {
            "type": "array",
            "description": "Description(s) for Error Code",
            "items": {
              "type": "string"
            }
          },
          "error": {
            "type": "array",
            "description": "Failure Error Codes",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "refId",
          "status"
        ],
        "x-tags": [
          "WhatsApp"
        ]
      },
      "templateBody": {
        "description": "",
        "type": "array",
        "x-examples": {
          "example-1": {
            "body": [
              {
                "text": "{variable}"
              },
              {
                "text": "{variable}"
              }
            ]
          },
          "example-2": [
            {
              "text": "string"
            }
          ]
        },
        "items": {
          "type": "object",
          "properties": {
            "text": {
              "type": "string",
              "description": "Placeholder Text"
            }
          }
        },
        "x-tags": [
          "WhatsApp"
        ]
      },
      "templateHeader": {
        "type": "array",
        "description": "",
        "minItems": 1,
        "uniqueItems": true,
        "x-examples": {
          "example-1": [
            {
              "video": {
                "link": "http://example.com"
              },
              "document": {
                "link": "http://example.com"
              },
              "image": {
                "link": "http://example.com"
              }
            }
          ]
        },
        "items": {
          "type": "object",
          "properties": {
            "video": {
              "type": "object",
              "properties": {
                "link": {
                  "$ref": "#/components/schemas/urlTag"
                }
              }
            },
            "document": {
              "type": "object",
              "properties": {
                "link": {
                  "$ref": "#/components/schemas/urlTag"
                }
              }
            },
            "image": {
              "type": "object",
              "properties": {
                "link": {
                  "$ref": "#/components/schemas/urlTag"
                }
              }
            }
          }
        },
        "x-tags": [
          "WhatsApp"
        ]
      },
      "msgTag": {
        "type": "string",
        "title": "msgTag",
        "minLength": 1,
        "maxLength": 5012,
        "description": "Text Message",
        "x-tags": [
          "WhatsApp"
        ]
      },
      "numberTag": {
        "type": "string",
        "title": "numberTag",
        "minLength": 5,
        "maxLength": 20,
        "pattern": "^[0-9]+",
        "description": "Mobile Number",
        "x-tags": [
          "WhatsApp"
        ]
      },
      "txnIdTag": {
        "type": "string",
        "title": "txnIdTag",
        "minLength": 1,
        "maxLength": 30,
        "description": "Source Transaction Identifier",
        "x-tags": [
          "WhatsApp"
        ]
      },
      "templateMsg": {
        "title": "templateMsg",
        "type": "object",
        "x-examples": {},
        "properties": {
          "txnid": {
            "$ref": "#/components/schemas/txnIdTag"
          },
          "number": {
            "$ref": "#/components/schemas/numberTag"
          },
          "type": {
            "type": "string",
            "enum": [
              "template"
            ],
            "description": "Media Type - template"
          },
          "media": {
            "type": "object",
            "required": [
              "name",
              "header",
              "body"
            ],
            "properties": {
              "name": {
                "type": "string",
                "description": "Template Name"
              },
              "header": {
                "$ref": "#/components/schemas/templateHeader"
              },
              "body": {
                "$ref": "#/components/schemas/templateBody"
              }
            }
          }
        },
        "required": [
          "number",
          "type",
          "media"
        ],
        "description": "TSS WhatsApp GW API for sending template message",
        "x-tags": [
          "WhatsApp"
        ]
      },
      "urlTag": {
        "type": "string",
        "title": "urlTag",
        "format": "uri",
        "description": "Complete link to the file",
        "x-tags": [
          "WhatsApp"
        ]
      }
    },
    "securitySchemes": {},
    "responses": {}
  },
  "tags": [
    {
      "name": "WhatsApp"
    }
  ]
}